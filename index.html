<!DOCTYPE html>
<html lang="et">
<head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z7G03F5WN"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-4Z7G03F5WN');
        </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TalTech kursused sügis 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="main.css">
    
</head>
<body class="bg-white text-black body-text">
    <div id="syncInfo" class="container mx-auto text-right text-xs text-tt-grey-1 mt-2 mb-2]">
        This site was synced with <a href="https://tunniplaan.taltech.ee/#/public" target="_blank" rel="noopener noreferrer" class="underline, text-tt-magenta">TalTech Timetable</a> on <span id="syncDate">...</span>
    </div>

    <header class="sticky top-0 z-50 bg-tt-dark-blue text-white p-2 shadow-md">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center">
                <button id="filterToggleButton" class="mr-4 p-2 text-white hover:bg-tt-dark-blue-hover rounded" aria-label="Ava filtrid"><i class="fas fa-bars fa-lg"></i></button>
                <h1 id="pageTitle" class="text-2xl proxima-nova-bold uppercase">TalTech kursused sügis 2025</h1>
            </div>
            <button id="languageToggle" class="p-2 bg-tt-magenta hover:bg-opacity-80 rounded" aria-label="Switch language"><i class="fas fa-globe"></i> <span id="langIndicator">EN</span></button>
        </div>
    </header>

    <div class="container mx-auto p-4 my-4 bg-gray-50 bg-opacity-90 rounded shadow">
        <div class="flex flex-col md:flex-row md:items-end gap-4">
            <div class="flex-grow relative md:w-3/5">
                <label for="searchInput" id="searchInputLabel" class="block text-sm font-medium text-gray-700 mb-1">Otsisõna (eralda komaga)</label>
                <input type="search" id="searchInput" class="p-2 border border-gray-300 bg-white rounded-md w-full body-text" placeholder="Sisesta otsisõna või -sõnad...">
            </div>
            <div class="md:w-1/5">
                <label for="searchFieldSelector" id="searchFieldSelectorLabel" class="block text-sm font-medium text-gray-700 mb-1">Otsi väljal</label>
                <select id="searchFieldSelector" class="p-2 border border-gray-300 bg-white rounded-md w-full text-sm h-[2.625rem]"> 
                    <option value="all">Kõik väljad</option>
                    <option value="title">Aine nimetus</option>
                    <option value="course_id">Ainekood</option>
                    <option value="keyword">Märksõna</option>
                    <option value="instructor">Õppejõud</option>
                </select>
            </div>
            <div class="flex gap-2 mt-2 md:mt-0">
                <button id="searchButton" class="bg-tt-magenta text-white p-2 rounded hover:bg-opacity-80 headline text-sm flex-grow h-[2.625rem]"><i class="fas fa-search mr-1"></i> <span id="searchButtonText">Otsi</span></button>
                <button id="resetSearchButton" class="bg-gray-300 text-gray-700 p-2 rounded hover:bg-gray-400 headline text-sm flex-grow h-[2.625rem]"><i class="fas fa-undo mr-1"></i> <span id="resetSearchButtonText">Lähtesta</span></button>
            </div>
        </div>
    </div>

    <aside id="filterPanel" class="bg-gray-50 p-4 shadow-lg fixed inset-y-0 left-0 transform -translate-x-full z-40 w-4/5 sm:w-1/3 md:w-1/5 lg:w-1/6 xl:w-[280px] overflow-y-auto mt-16 max-h-[calc(100%-4rem)] transition-transform duration-300 ease-in-out rounded-r-lg">
        <div class="flex justify-between items-center mb-4">
            <h2 id="filtersTitle" class="text-xl headline tt-dark-blue" style="margin-top: 12px;">Filtrid</h2>
            <button id="closeFilterButton" class="text-tt-magenta hover:text-tt-dark-blue"><i class="fas fa-times fa-lg"></i></button>
        </div>
        <div class="space-y-4">
            <div><label for="schoolFilter" id="schoolFilterLabel" class="block text-sm font-medium tt-dark-blue headline">Teaduskond</label><select id="schoolFilter" class="mt-1 block w-full p-2 border-tt-grey-1 rounded-md shadow-sm text-sm"></select></div>
            <div><label for="instituteFilter" id="instituteFilterLabel" class="block text-sm font-medium tt-dark-blue headline">Instituut</label><select id="instituteFilter" class="mt-1 block w-full p-2 border-tt-grey-1 rounded-md shadow-sm text-sm" disabled></select></div>
            <div class="searchable-dropdown"><label for="groupFilterInput" id="groupFilterLabel" class="block text-sm font-medium tt-dark-blue headline">Rühm</label><input type="search" id="groupFilterInput" class="mt-1 block w-full p-2 border-tt-grey-1 rounded-md shadow-sm text-sm"><div id="groupFilterList" class="searchable-dropdown-list hidden"></div></div>
            <div><label for="assessmentFormFilter" id="assessmentFormFilterLabel" class="block text-sm font-medium tt-dark-blue headline">Hindamisvorm</label><select id="assessmentFormFilter" class="mt-1 block w-full p-2 border-tt-grey-1 rounded-md shadow-sm text-sm"></select></div>
            <div>
                <label id="eapFilterLabel" class="block text-sm font-medium tt-dark-blue headline mb-1">EAP</label>
                <div class="space-y-1">
                    <label class="flex items-center text-sm"><input type="radio" name="eapFilter" value="" class="h-4 w-4 text-tt-magenta" checked><span id="eapAllLabel" class="ml-2">Kõik</span></label>
                    <label class="flex items-center text-sm"><input type="radio" name="eapFilter" value="3" class="h-4 w-4 text-tt-magenta"><span id="eap3Label" class="ml-2">3 EAP</span></label>
                    <label class="flex items-center text-sm"><input type="radio" name="eapFilter" value="6" class="h-4 w-4 text-tt-magenta"><span id="eap6Label" class="ml-2">6 EAP</span></label>
                </div>
            </div>
            <div>
                <label id="languageFilterLabel" class="block text-sm font-medium tt-dark-blue headline mb-1">Õppekeel</label>
                <div class="space-y-1">
                    <label class="flex items-center text-sm"><input type="radio" name="languageFilter" value="" class="h-4 w-4 text-tt-magenta" checked><span id="langAllLabel" class="ml-2">Kõik</span></label>
                    <label class="flex items-center text-sm"><input type="radio" name="languageFilter" value="et" class="h-4 w-4 text-tt-magenta"><span id="langEtLabel" class="ml-2">Eesti keel</span></label>
                    <label class="flex items-center text-sm"><input type="radio" name="languageFilter" value="en" class="h-4 w-4 text-tt-magenta"><span id="langEnLabel" class="ml-2">Inglise keel</span></label>
                </div>
            </div>
        </div>
    </aside>

    <div class="container mx-auto p-4">
        <div class="relative flex justify-center items-center mb-4 h-10">
            <div id="resultsCounter" class="text-tt-dark-blue font-semibold text-center"></div>
            <div id="viewToggleButtonContainer" class="absolute right-0"></div>
        </div>
        <div id="activeFiltersDisplay" class="mb-4"></div>
        
        <main id="courseList" class="w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"></main>
        <div id="weeklyView" class="w-full hidden"></div>
    </div>
    
    <button id="scrollTopBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>

    <div id="loadingIndicator" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-[100]">
        <div class="bg-white p-5 rounded-lg shadow-xl flex flex-col items-center">
            <i class="fas fa-spinner fa-spin fa-3x tt-dark-blue"></i>
            <p id="loadingText" class="mt-2 text-tt-dark-blue body-text">Laen andmeid...</p>
        </div>
    </div>
    
    <div id="customTooltip"></div>

    <script src="main.js" defer></script>
    <script>
fetch('./unified_courses.json')
  .then(response => response.json())
  .then(data => {
    if (data.scraping_datetime) {
      document.getElementById('syncDate').textContent = data.scraping_datetime;
    }
  });
</script>
</body>
</html>